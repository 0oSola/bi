<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>SINGULAR-我的数据源</title>


<link rel="stylesheet" type="text/css" href="../static/css/bootstrap/bootstrap.min.css" />
<link rel="stylesheet" type="text/css" href="../static/css/common.css" />
<link href="../static/css/font-awesome/font-awesome.min.css" type="text/css" rel="stylesheet"/>
<link rel="stylesheet" type="text/css" href="../static/css/slideMenu.css"/>
<link rel="stylesheet" type="text/css" href="../static/css/chartlayout.css"/>
<link rel="stylesheet" type="text/css" href="../static/css/common_ajax.css"/>
<link rel="stylesheet" type="text/css" href="../static/css/bootstrap-datetimepicker/bootstrap-datetimepicker.min.css" />
<link rel="stylesheet" type="text/css" href="../static/css/bootstrap-sortable/bootstrap-sortable.css"/>
<link href="../static/css/database.css" rel="stylesheet" type="text/css">
<link href="../static/css/common_ajax.css" rel="stylesheet" type="text/css">



<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/bootstrap/bootstrap.min.css') }}">
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/common.css') }}">
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/font-awesome/font-awesome.min.css') }}">
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/slideMenu.css') }}">
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/chartlayout.css') }}">
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/common_ajax.css') }}">
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/bootstrap-datetimepicker/bootstrap-datetimepicker.min.css') }}">
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/bootstrap-sortable/bootstrap-sortable.css') }}">

<link href="{{ url_for('static', filename='css/database.css') }}" rel="stylesheet" type="text/css">
<link href="{{ url_for('static', filename='css/common_ajax.css') }}" rel="stylesheet" type="text/css">

<link href="../static/css/taskNotice.css" type="text/css" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/taskNotice.css') }}">

</head>

<body>

<div class="success-box" id="success-box">
    <h4 class="success-heading">修改权限成功！！</h4>
</div>

<div class="msg-box" id="msg-box">
    <h4 class="alert-heading">发生错误了</h4>
    <p id="msg-content">fdfdsfd发生错误了发生错误了发生错误了发生错误了</p>
</div>




<div class="spin" id="spin">
	<img src="{{ url_for('static', filename='images/spin.svg') }}"/>
</div>

<!--登出-->
<div id="logoutModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="dlModalLabel" aria-hidden="true">
   <div class="modal-dialog">
      <div class="modal-content">
         <div class="modal-header">
            <button type="button" class="close" 
                data-dismiss="modal" aria-hidden="true">
                  &times;
            </button>
            <h3 class="modal-title" id="myModalLabel">
               登出
            </h3>
         </div>
         <div class="modal-body">
            是否登出用户？
         </div>
         <div class="modal-footer">
         	<a  href="/logout" class="btn btn-primary sure-logout">
               确认
            </a>
            <button type="button" class="btn btn-default" 
                data-dismiss="modal">关闭
            </button>
         </div>
      </div><!-- /.modal-content -->
   </div>
</div><!-- /.modal -->

<!--delete-->
<div id="deleteDBModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="dlModalLabel" aria-hidden="true">
   <div class="modal-dialog">
      <div class="modal-content">
         <div class="modal-header">
            <button type="button" class="close" 
                data-dismiss="modal" aria-hidden="true">
                  &times;
            </button>
            <h3 class="modal-title" id="myModalLabel">
               删除数据源
            </h3>
         </div>
         <div class="modal-body">
            是否删除该数据源？
         </div>
         <div class="modal-footer">
         	<button type="button" class="btn btn-primary deleteDBBtn">
               确认
            </button>
            <button type="button" class="btn btn-default" 
                data-dismiss="modal">关闭
            </button>
            
         </div>
      </div><!-- /.modal-content -->
   </div>
</div><!-- /.modal -->


<!--create数据源-->
<div id="createDBModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="dlModalLabel" aria-hidden="true">
   <div class="modal-dialog">
      <div class="modal-content">
         <div class="modal-header">
            <button type="button" class="close" 
                data-dismiss="modal" aria-hidden="true">
                  &times;
            </button>
            <h3 class="modal-title" id="myModalLabel">
               创建新的数据源
            </h3>
         </div>
         <div class="modal-body ds-content">
         
         	<div class="ds-item"><label class="title">数据源别名<span class="need">*</span></label><input type="text" name="ds_name" class="ds-alais input" placeholder="数据源1"/></div>
            <div class="ds-item"><label class="title"><span class="need">数据库类型*</span></label>
                <select class="ds-type">
                    <option value="mysql">mysql</option>
                    <!--<option value="sqlite3">sqlite3</option>
                    <option value="Hive">Hive</option>-->
                </select>
            </div>
            <div class="ds-item"><label class="title">主机名或ip<span class="need">*</span></label><input type="text" name="ds-host" class="ds-host input" placeholder="41.195.12.2"/></div>
            <div class="ds-item"><label class="title">数据库端口<span class="need">*</span></label><input type="text" name="ds-port" class="ds-port input" onkeyup="if(! /^\d+$/.test(this.value)){alert('端口必须为数字');this.value='';}if(this.value.length>6){alert('端口必须小于6位');this.value='';}" placeholder="3306"/></div>
            <div class="ds-item"><label class="title">数据库用户名<span class="need">*</span></label><input type="text" name="ds-user" class="ds-user input"/></div>
            <div class="ds-item"><label class="title">用户名密码<span class="need">*</span></label><input type="password" name="db_pw" class="ds-password input"/></div>
            <div class="ds-item"><label class="title">数据库名<span class="need">*</span></label><input type="text" name="db_name" class="ds-dbname input"/></div>
            
         </div>
         <div class="modal-footer">
			<button type="button" class="btn add-database">
               确认添加
            </button>
            <!--<button type="button" class="btn btn-primary test-database">
            	测试连接
            </button>-->
            <button type="button" class="btn btn-default" 
                data-dismiss="modal">关闭
            </button>
         </div>
      </div><!-- /.modal-content -->
   </div>
</div><!-- /.modal -->


<!--edit-->
<div id="editDBModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="dlModalLabel" aria-hidden="true">
   <div class="modal-dialog">
      <div class="modal-content">
         <div class="modal-header">
            <button type="button" class="close" 
                data-dismiss="modal" aria-hidden="true">
                  &times;
            </button>
            <h3 class="modal-title" id="myModalLabel">
               编辑数据源
            </h3>
         </div>
         <div class="modal-body ds-content">
         	<div class="ds-item"><label class="title">数据源别名</label><span class="ds-alais item"></span></div>
            <div class="ds-item"><label class="title">数据库类型</label><span class="ds-type item">mysql</span></div>
            <div class="ds-item"><label class="title">主机名或ip</label><input type="text" class="ds-host input" placeholder="41.195.12.2"/></div>
            <div class="ds-item"><label class="title">数据库端口</label><input type="text" class="ds-port input" onkeyup="if(! /^\d+$/.test(this.value)){alert('端口必须为数字');this.value='';}if(this.value.length>6){alert('端口必须小于6位');this.value='';}" placeholder="3306"/></div>
            <div class="ds-item"><label class="title">数据库用户名</label><input type="text" class="ds-user input"/></div>
            <div class="ds-item"><label class="title">用户名密码</label><input type="password" class="ds-password input"/></div>
            <div class="ds-item"><label class="title">数据库名</label><input type="text" class="ds-dbname input"/></div>
         </div>
         <div class="modal-footer">
			<button type="button" class="btn editDBBtn">
               确认修改
            </button>
<!--            <button type="button" class="btn btn-primary test-database">
            	测试连接
            </button>-->
            <button type="button" class="btn btn-default" 
                data-dismiss="modal">关闭
            </button>
         </div>
      </div><!-- /.modal-content -->
   </div>
</div><!-- /.modal -->


<div class="spin" id="spin">
	<img src="{{ url_for('static', filename='images/spin.svg') }}"/>
</div>



<div id="wrapper" class="toggled">
  <div class="overlay" style="visibility:hidden"></div>
  
  <!-- Sidebar -->
  <nav class="navbar navbar-inverse navbar-fixed-top" id="sidebar-wrapper" role="navigation">
    <ul class="nav sidebar-nav">
      <li class="sidebar-brand"> <a href="#"> SINGULAR </a> </li>
      
      <li> <a class="key-list" href="/workbench/user_bi/home"><i class="fa fa-file-text-o"></i> 我的首页</a> </li>
      <li> <a class="key-list" href="/workbench/user_bi/my_project"><i class="fa fa-tasks"></i> 我的项目</a> </li>
      <li> <a class="key-list" href="/workbench/user_bi/my_report"><i class="fa fa-book"></i> 我的报表</a> </li>
      <li> <a class="key-list" href="/workbench/user_bi/my_material"><i class="fa fa-picture-o"></i> 我的素材库</a> </li>
      <li> <a class="key-list" href="/workbench/user_bi/my_task"><i class="fa fa-bell"></i> 我的任务</a> </li>
      <li class="select"> <a class="key-list" href="/workbench/user_bi/my_datasource"><i class="fa fa-database"></i> 我的数据源</a> </li>
          <!--<li><a href="">新增数据源</a></li>-->
    </ul>
  </nav>
  <!-- /#sidebar-wrapper --> 
   
  <!-- Page Content -->
  <div id="page-content-wrapper">
  	<div id="top">
    	<div class="user-menu">
        	<div class="user-item">
            	<span class="menu-item">{{ username }} <b class="caret"></b></span>
                <!--用户切换-->
                <div class="drop-user-list" id="drop-user">
                    <ul class="user-type-list">
                        {%if user_type == 0 %}
                            <li class="select"><a class="user-switch" href="/workbench/user_bi/home">BI用户</a></li>
                            <li><a class="user-switch" href="/workbench/user_normal/home">普通用户</a></li>
                         {% elif user_type == 1 %}
                            <li><a class="user-switch" href="/workbench/user_normal/home">普通用户</a></li>
                        {% endif %}
                    </ul>
                </div>
                <!--end 用户切换-->
            </div>
            
            <!--任务通知-->
            <div class="menu-item notice-item">
            	<span class="task-notice fa fa-bell"><i class="new-notice" id="new-notice"></i></span>
                
                <div class="drop-notice-list" id="drop-notice">
                	<div class="border-top"><span class="border-inner"></span></div>
                    <div class="task-title">最新完成的任务</div>
                    <div class="null-content">暂无已完成的最新任务</div>
                	<ul class="complate-list">
                    	<li><a href="void();">暂无已完成的最新任务</a></li>
                        <li><a href="void();">task222222222222222222222222222 已完成</a></li>
                    </ul>
                    <div class="list-more"><a href="/workbench/user_bi/my_task">查看更多>></a></div>
                </div>
            </div>
            <!--end 任务通知-->
            <div class="flip-container menu-item" ontouchstart="this.classList.toggle('hover');">
            <div class="flipper logout-box">
                <div class="front-box">
                    <i class="fa fa-sign-out logout"></i>
                </div>
                <div class="back-box">
                    <i class="fa fa-sign-out logout_hover"></i>
                </div>
            </div>
        </div>
        	
        </div>
    </div>
    <div class="main">
           
       <div class="chart-box" id="chart-tab3">
      	<div class="title-box">
        	<span class="title">数据源列表</span>
            
        </div>
        <!--<div class="cs-box">
        	<div class="menu-box" id="report-box">
                <a class="menu-row select" data-type="rDay-content">日报</a>
                <a class="menu-row" data-type="rWeek-content">周报</a>
                <a class="menu-row" data-type="rMonth-content">月报
                <div class="back" ></div></a>
            </div>
        </div>-->

     	<!--db-content-->
        <div class="dbList-content tab-item" data-pageNo="1">
            <div class="tb-box">
                <table class="table table-striped table-bordered table-hover datatable">
                    <thead>
                        <tr class="table-title">
                        	<!--width:215px-->
                        	<th width="215px">操作</th>
                            <th>id</th>
                            <th>别名</th>
                            <th>用户名</th>
                            <th>数据库名</th>
                            <th>类型</th>
                            <th>IP</th>
                            <th>端口</th>
                            <th>添加时间</th>
                        </tr>
                    </thead>
                    <tbody class="data-tbody">
                    	{% for ds in ds_list %}
                        	{%if ds.id % 2 == 0 %}
                                <tr class="gradeA odd">
                                	<td>
                                    	<span data-name="{{ ds.ds_alias }}" class="cz-item db-edit">编辑</span>
                                        <span data-name="{{ ds.ds_alias }}" class="cz-item db-remove">删除</span>
                                        <a data-name="{{ ds.ds_alias }}" href="/workbench/user_bi/datasource/match/{{ ds.ds_alias }}" target="_blank" class="db-preview">智能匹配</a>
                                    </td>
                                	<td class="ds-id">{{ ds.id }}</td>
                                    <td class="ds-alias">{{ ds.ds_alias }}</td>
                                    <td class="ds-user">{{ ds.ds_user_name }}</td>
                                    <td class="ds-dbname">{{ ds.ds_name }}</td>
                                    <td class="ds-type">{{ ds.ds_type }}</td>
                                    <td class="ds-host">{{ ds.ds_host }}</td>
                                    <td class="ds-port">{{ ds.ds_port }}</td>
                                    <td class="ds-time">{{ ds.ds_create_time }}</td>
                                </tr>
                            {% else %}
                                <tr class="gradeA even">
                                	<td>
                                        <span data-name="{{ ds.ds_alias }}" class="cz-item db-edit">编辑</span>
                                        <span data-name="{{ ds.ds_alias }}" class="cz-item db-remove">删除</span>
                                        <a data-name="{{ ds.ds_alias }}" href="/workbench/user_bi/datasource/match/{{ ds.ds_alias }}" target="_blank" class="db-preview">智能匹配</a>
                                    </td>
                                    <td class="ds-id">{{ ds.id }}</td>
                                    <td class="ds-alias">{{ ds.ds_alias }}</td>
                                    <td class="ds-user">{{ ds.ds_user_name }}</td>
                                    <td class="ds-dbname">{{ ds.ds_name }}</td>
                                    <td class="ds-type">{{ ds.ds_type }}</td>
                                    <td class="ds-host">{{ ds.ds_host }}</td>
                                    <td class="ds-port">{{ ds.ds_port }}</td>
                                    <td class="ds-time">{{ ds.ds_create_time }}</td>
                                </tr>
							{% endif %}
                        {% endfor %}
                    
                    </tbody>
                </table>
                <span class="create-database">创建数据源</span>
                <div class="pageContainer"></div>
            </div>
        </div>

      </div>
      <!--end chart-box-->
           
      
    </div>
  </div>
  <!-- /#page-content-wrapper --> 
</div> 
<!-- /#wrapper --> 



</body>

<script type="text/javascript" src="../static/js/jquery/1.11.1/jquery-1.11.1.min.js"></script>
<script type="text/javascript" src="../static/js/bootstrap.js"></script>
<script type="text/javascript" src="../static/js/bootpage/jquery.bootpag.min.js"></script>
<script type="text/javascript" src="../static/js/bootstrap-datetimepicker/bootstrap-datetimepicker.min.js"></script>
<script type="text/javascript" src="../static/js/bootstrap-datetimepicker/locales/bootstrap-datetimepicker.zh-CN.js"></script>
<script type="text/javascript" src="../static/js/bootstrap-sortable/moment.min.js"></script>
<script type="text/javascript" src="../static/js/bootstrap-sortable/bootstrap-sortable.js"></script>


<script src="{{ url_for('static', filename='js/jquery/1.11.1/jquery-1.11.1.min.js') }}" type="text/javascript"></script> 
<script src="{{ url_for('static', filename='js/bootstrap.js') }}" type="text/javascript"></script>
<script src="{{ url_for('static', filename='js/bootpage/jquery.bootpag.min.js') }}" type="text/javascript"></script> 
<script src="{{ url_for('static', filename='js/bootstrap-datetimepicker/bootstrap-datetimepicker.min.js') }}" type="text/javascript"></script>  
<script src="{{ url_for('static', filename='js/bootstrap-datetimepicker/locales/bootstrap-datetimepicker.zh-CN.js') }}" type="text/javascript"></script>
<script src="{{ url_for('static', filename='js/bootstrap-sortable/moment.min.js') }}" type="text/javascript"></script> 
<script src="{{ url_for('static', filename='js/bootstrap-sortable/bootstrap-sortable.js') }}" type="text/javascript"></script> 

<script src="{{ url_for('static', filename='js/common.js') }}" type="text/javascript"></script> 
<script type="text/javascript" src="../static/js/common.js"></script>

<script src="{{ url_for('static', filename='js/log.js') }}" type="text/javascript"></script> 
<script type="text/javascript" src="../static/js/log.js"></script>

<script src="{{ url_for('static', filename='js/dsList.js') }}" type="text/javascript"></script> 
<script type="text/javascript" src="../static/js/dsList.js"></script>

<script src="{{ url_for('static', filename='js/database.js') }}" type="text/javascript"></script> 
<script type="text/javascript" src="../static/js/database.js"></script>

<script src="{{ url_for('static', filename='js/taskNotice.js') }}" type="text/javascript"></script>
<script type="text/javascript" src="../static/js/taskNotice.js"></script>



</html>
